# ───────────────────────────────────────────────────────────────────
# Ansible Configuration — Spring PetClinic Microservices
# ───────────────────────────────────────────────────────────────────
# This file is read automatically when ansible-playbook is run from
# the ansible/ directory.

[defaults]
# Inventory is auto-generated by Terraform (local_file.ansible_inventory)
inventory = inventory/hosts
remote_user = ec2-user
private_key_file = ../terraform/environments/dev/spms-dev.pem
roles_path = roles
vault_password_file = .vault_pass

# Disable host key checking for dynamic cloud instances
host_key_checking = False

# Disable retry files (clutter)
retry_files_enabled = False

# Gather only necessary facts for faster execution
gathering = smart
inject_facts_as_vars = False
interpreter_python = auto_silent

# Increase parallelism for multi-node runs
forks = 10

# Timeout for SSH connections (seconds)
timeout = 30

[ssh_connection]
# Multiplexing: reuse SSH connections for faster sequential tasks
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False
