# ───────────────────────────────────────────────────────────────────
# Ansible Inventory — Auto-Generated by Terraform
# ───────────────────────────────────────────────────────────────────
# WARNING: This file is managed by Terraform. Do NOT edit manually.
# Any changes will be overwritten on the next `terraform apply`.
# Source: terraform/environments/dev/main.tf → local_file.ansible_inventory → inventory/hosts
#
# Tool Installation Matrix:
# ┌───────────────────┬──────────────────────────────────────────────┐
# │ Instance          │ Ansible Roles                                │
# ├───────────────────┼──────────────────────────────────────────────┤
# │ Jenkins Master    │ java, docker, awscli, jenkins, security_tools│
# │ Worker Nodes      │ java, docker, awscli, maven, kubectl, helm,  │
# │                   │ security_tools                               │
# │ SonarQube         │ java, docker, awscli, sonarqube, sec_tools   │
# └───────────────────┴──────────────────────────────────────────────┘
# ───────────────────────────────────────────────────────────────────

[jenkins_master]
52.203.38.225 ansible_user=ec2-user ansible_ssh_private_key_file=../terraform/environments/dev/spms-dev.pem private_ip=10.0.1.4

[worker_nodes]
100.24.73.4 ansible_user=ec2-user ansible_ssh_private_key_file=../terraform/environments/dev/spms-dev.pem private_ip=10.0.1.182

[sonarqube]
100.29.15.130 ansible_user=ec2-user ansible_ssh_private_key_file=../terraform/environments/dev/spms-dev.pem private_ip=10.0.1.34

# ───────────────────────────────────────────────────────────────────
# Group Aggregation — Maps to Playbook Plays
# ───────────────────────────────────────────────────────────────────

# Play 1: Core tools (java, docker, awscli) → all_nodes
[all_nodes:children]
jenkins_master
worker_nodes
sonarqube

# Play 2: Jenkins install & config → jenkins_master
# (uses [jenkins_master] group directly)

# Play 3: Build & deploy tools (maven, kubectl, helm) → build_agents
[build_agents:children]
worker_nodes

# Play 4: SonarQube stack deployment → sonarqube
# (uses [sonarqube] group directly)

# Play 5: Security scanners (trivy, checkov) → devops_tools
[devops_tools:children]
jenkins_master
sonarqube
worker_nodes

# ───────────────────────────────────────────────────────────────────
# Global Variables
# ───────────────────────────────────────────────────────────────────
[all:vars]
eks_cluster_name=petclinic-dev-cluster
aws_region=us-east-1
vpc_id=vpc-00aa5eb6e14df1f91
account_id=365269738775
project_name=Petclinic
environment=dev
